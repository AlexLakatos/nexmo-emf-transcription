(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3075"],{"087b":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[t.loading?s("div",[s("h1",{staticClass:"mdl-typography--display-1"},[t._v("Loading...")]),s("div",{staticClass:"mdl-progress mdl-js-progress mdl-progress__indeterminate"})]):t._e(),t.showDialog?s("div",{staticClass:"mdl-dialog"},[s("h4",{staticClass:"mdl-dialog__title"},[t._v("Something is wrong with the media stream!")]),t._m(0),s("div",{staticClass:"mdl-dialog__actions"},[s("button",{staticClass:"mdl-button close",attrs:{type:"button"},on:{click:t.startStreaming}},[t._v("Restart")]),s("button",{staticClass:"mdl-button close",attrs:{type:"button"},on:{click:function(a){t.showDialog=!t.showDialog}}},[t._v("Ignore")])])]):t._e(),t.loading?t._e():s("div",{staticClass:"audio-controls"},[t._m(1),t.streaming?s("div",[s("h2",{staticClass:"mdl-typography--display-1"},[t._v("You're streaming live")]),t._m(2),s("button",{staticClass:"mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored",on:{click:t.stopStreaming}},[s("i",{staticClass:"material-icons"},[t._v("stop")])])]):t._e(),t.streaming?t._e():s("div",[s("h2",{staticClass:"mdl-typography--display-1"},[t._v("You're not streaming")]),s("button",{staticClass:"mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored",on:{click:t.startStreaming}},[s("i",{staticClass:"material-icons"},[t._v("play_arrow")])]),t._m(3)])])])},n=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"mdl-dialog__content"},[s("p",[t._v("\n        Please restart media stream.\n      ")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("audio",{attrs:{id:"audio",src:""}},[s("source")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("button",{staticClass:"mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored",attrs:{disabled:""}},[s("i",{staticClass:"material-icons"},[t._v("play_arrow")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("button",{staticClass:"mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored",attrs:{disabled:""}},[s("i",{staticClass:"material-icons"},[t._v("stop")])])}],o=(s("cadf"),s("551c"),s("097d"),s("bc3a")),i=s.n(o),l=s("e578"),r={name:"stage",data:function(){return{conversation:void 0,streaming:!1,showDialog:!1,loading:!0}},created:function(){var t=this;i.a.get("https://nexmo-in-app-demo.herokuapp.com/api/jwt/stage".concat(this.$route.params.id)).then(function(a){new l({debug:!1}).login(a.data.user_jwt).then(function(a){if(console.log("*** Logged into app",a),t.$route.params.conversation)return a.getConversation(t.$route.params.conversation);t.$router.push("/")}).then(function(a){t.conversation=a,t.loading=!1})}).catch(function(a){t.error=a})},methods:{startStreaming:function(){var t=this;this.showDialog=!1,this.conversation.media.enable().then(function(a){var s=document.getElementById("audio");"srcObject"in s?s.srcObject=a:s.src=window.URL.createObjectURL(a),s.onloadedmetadata=function(){s.play(),t.streaming=!0}})},stopStreaming:function(){this.conversation.media.disable();var t=document.getElementById("audio");t.pause(),this.streaming=!1}}},c=r,d=(s("3c02"),s("2877")),u=Object(d["a"])(c,e,n,!1,null,null,null);u.options.__file="Stage.vue";a["default"]=u.exports},"3c02":function(t,a,s){"use strict";var e=s("845f"),n=s.n(e);n.a},"845f":function(t,a,s){}}]);
//# sourceMappingURL=chunk-3075.0d9c82d5.js.map